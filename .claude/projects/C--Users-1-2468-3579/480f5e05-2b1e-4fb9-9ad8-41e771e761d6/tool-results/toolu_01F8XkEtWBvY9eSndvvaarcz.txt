   280→    def test_suspension_on_severe_drawdown(
   281→        self, manager_no_approval: StrategyLifecycleManager
   282→    ) -> None:
   283→        """测试严重回撤时暂停."""
   284→        state = manager_no_approval.register_strategy("ppo_v1", "PPO策略", "rl")
   285→        state.stage = LifecycleStage.PRODUCTION
   286→        state.allocation_tier = AllocationTier.NORMAL
   287→
   288→        # 更新严重回撤
   289→        manager_no_approval.update_performance(
   290→            "ppo_v1",
   291→            max_drawdown=0.30,
   292→        )
   293→
   294→        state = manager_no_approval.get_strategy("ppo_v1")
   295→        assert state is not None
   296→        assert state.stage == LifecycleStage.SUSPENDED
   297→        assert state.allocation_tier == AllocationTier.ZERO
   298→
   299→    def test_recovery_from_degraded(
   300→        self, manager_no_approval: StrategyLifecycleManager
   301→    ) -> None:
   302→        """测试从降级期恢复."""
   303→        state = manager_no_approval.register_strategy("ppo_v1", "PPO策略", "rl")
   304→        state.stage = LifecycleStage.DEGRADED
   305→        state.allocation_tier = AllocationTier.MINIMAL
   306→
   307→        # 更新好表现
   308→        manager_no_approval.update_performance(
   309→            "ppo_v1",
   310→            sharpe_ratio=1.5,
   311→            max_drawdown=0.08,
   312→        )
   313→
   314→        state = manager_no_approval.get_strategy("ppo_v1")
   315→        assert state is not None
   316→        assert state.stage == LifecycleStage.VALIDATION
   317→
   318→
   319→# ============================================================

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>

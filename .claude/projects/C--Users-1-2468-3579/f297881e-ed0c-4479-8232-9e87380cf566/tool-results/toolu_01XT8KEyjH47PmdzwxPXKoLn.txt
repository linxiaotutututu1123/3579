============================= test session starts =============================
platform win32 -- Python 3.12.10, pytest-9.0.2, pluggy-1.6.0
rootdir: C:\Users\1\2468\3579
configfile: pyproject.toml
plugins: cov-7.0.0
collected 1687 items

tests\test_app_config.py ............................................... [  2%]
.........                                                                [  3%]
tests\test_audit_correlation.py .                                        [  3%]
tests\test_audit_decision_log.py ..............                          [  4%]
tests\test_audit_guardian_log.py .........                               [  4%]
tests\test_audit_pnl_attribution.py .................                    [  5%]
tests\test_audit_replay_verifier.py ....................                 [  6%]
tests\test_audit_writer.py ............                                  [  7%]
tests\test_broker_factory.py ..............                              [  8%]
tests\test_china_fee_calculator.py ..................................... [ 10%]
..                                                                       [ 10%]
tests\test_china_futures_rules.py ...................................... [ 13%]
....................                                                     [ 14%]
tests\test_ci_gate.py ................                                   [ 15%]
tests\test_ci_json_report.py ........................                    [ 16%]
tests\test_constraints_recovery_and_margin.py ......                     [ 16%]
tests\test_correlation_across_risk_and_execution.py .                    [ 17%]
tests\test_cost_estimator.py ......................                      [ 18%]
tests\test_coverage_complete.py ............................             [ 19%]
tests\test_ctp_api_enhanced.py .....................................     [ 22%]
tests\test_ctp_broker.py .............                                   [ 22%]
tests\test_ctp_config.py ...........................................     [ 25%]
tests\test_ctp_mapping.py ..................                             [ 26%]
tests\test_delivery_aware.py ........................................... [ 29%]
.                                                                        [ 29%]
tests\test_dingtalk.py ....                                              [ 29%]
tests\test_dl_torch_policy_smoke.py ....                                 [ 29%]
tests\test_exchange_config.py .........................................  [ 32%]
tests\test_exec_context.py ..................                            [ 33%]
tests\test_exec_engine.py ..................                             [ 34%]
tests\test_exec_order_context.py ...............                         [ 35%]
tests\test_exec_pair.py .......................                          [ 36%]
tests\test_exec_position_tracker.py .....................                [ 37%]
tests\test_exec_protection.py .......................                    [ 39%]
tests\test_exec_retry.py ......................                          [ 40%]
tests\test_exec_state_machine.py ................................        [ 42%]
tests\test_exec_timeout.py ..................                            [ 43%]
tests\test_execution_events.py .                                         [ 43%]
tests\test_experimental.py .................                             [ 44%]
tests\test_explain_audit.py ........                                     [ 44%]
tests\test_fallback.py .....................                             [ 46%]
tests\test_flatten_executor.py ...                                       [ 46%]
tests\test_flatten_idempotency.py .                                      [ 46%]
tests\test_flatten_plan.py ...                                           [ 46%]
tests\test_guardian_actions.py ..........                                [ 47%]
tests\test_guardian_monitor.py .................                         [ 48%]
tests\test_guardian_recovery.py .........                                [ 48%]
tests\test_guardian_state_machine.py ........................            [ 50%]
tests\test_guardian_triggers.py ....................                     [ 51%]
tests\test_hg5_abort_and_data_quality.py .                               [ 51%]
tests\test_hg6_fault_injection.py ...                                    [ 51%]
tests\test_hg6_replay_deterministic.py ..                                [ 51%]
tests\test_kalman_beta_enhanced.py .............................         [ 53%]
tests\test_limit_price.py .............................................. [ 56%]
...............                                                          [ 56%]
tests\test_linear_ai_smoke.py ....                                       [ 57%]
tests\test_live_guard.py ..............                                  [ 58%]
tests\test_logger.py ................................................... [ 61%]
.                                                                        [ 61%]
tests\test_main.py ..                                                    [ 61%]
tests\test_margin_monitor.py ........................................... [ 63%]
.........................                                                [ 65%]
tests\test_market_bar_builder.py ..........                              [ 65%]
tests\test_market_instrument_cache.py .............                      [ 66%]
tests\test_market_quality.py ............                                [ 67%]
tests\test_market_quote_cache.py .........................               [ 68%]
tests\test_market_subscriber.py .................                        [ 69%]
tests\test_market_universe_selector.py ..........                        [ 70%]
tests\test_moe_strategy_smoke.py ....                                    [ 70%]
tests\test_monitoring.py ......................                          [ 71%]
tests\test_orchestrator_killswitch.py .                                  [ 72%]
tests\test_order_tracker.py ................                             [ 72%]
tests\test_order_types_offset_open.py ..                                 [ 73%]
tests\test_portfolio.py ......................                           [ 74%]
tests\test_portfolio_analytics_enhanced.py ............................  [ 76%]
tests\test_programmatic_trading.py ..................................... [ 78%]
.                                                                        [ 78%]
tests\test_rebalancer_cross_zero_split.py ......                         [ 78%]
tests\test_reconcile.py ............                                     [ 79%]
tests\test_replay.py .......                                             [ 79%]
tests\test_replay_verifier_enhanced.py .............................     [ 81%]
tests\test_risk_daily_loss_lockout.py ..                                 [ 81%]
tests\test_risk_events.py ..                                             [ 81%]
tests\test_risk_init_gate.py .                                           [ 81%]
tests\test_risk_state_machine.py ...                                     [ 81%]
tests\test_runner_f21_paper_smoke.py .                                   [ 82%]
tests\test_runner_init.py .                                              [ 82%]
tests\test_serial_close_then_open_ordering.py ...                        [ 82%]
tests\test_sim.py .......                                                [ 82%]
tests\test_sim_gate.py .................................                 [ 84%]
tests\test_strategy_contract.py ..............................           [ 86%]
tests\test_strategy_factory.py ......                                    [ 86%]
tests\test_stress_test_china.py ........................................ [ 89%]
............                                                             [ 89%]
tests\test_top_tier_strategy_smoke.py ...                                [ 90%]
tests\test_trading_calendar.py ......................................... [ 92%]
............                                                             [ 93%]
tests\test_trading_tick_pipeline_paper.py ...                            [ 93%]
tests\test_training_monitor_enhanced.py ..............................   [ 95%]
tests\test_triggers_china.py ........................................... [ 97%]
.......................                                                  [ 99%]
tests\test_var_calculator.py ................                            [100%]

============================ 1687 passed in 5.65s =============================
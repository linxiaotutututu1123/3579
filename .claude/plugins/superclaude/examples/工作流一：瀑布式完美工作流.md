
ğŸ“œ å·¥ä½œæµä¸€ï¼šç€‘å¸ƒå¼å®Œç¾å·¥ä½œæµ


ç†å¿µï¼šä¸¥æ ¼æŠŠæ§æ¯ä¸ªé˜¶æ®µï¼Œå±‚å±‚é€’è¿›ï¼Œç¡®ä¿å®Œç¾äº¤ä»˜
é€‚ç”¨ï¼šå¤§å‹ç³»ç»Ÿã€ç›‘ç®¡åˆè§„é¡¹ç›®ã€é¦–æ¬¡å¼€å‘

---
name: waterfall-perfection-workflow

  ç€‘å¸ƒå¼å®Œç¾å·¥ä½œæµ - ä¸¥æ ¼é¡ºåºæ‰§è¡Œ

  æ¯ä¸ªé˜¶æ®µå¿…é¡»100%å®Œæˆå¹¶é€šè¿‡å®¡æ‰¹æ‰èƒ½è¿›å…¥ä¸‹ä¸€é˜¶æ®µ

  é€‚åˆå¯¹è´¨é‡è¦æ±‚æé«˜ã€éœ€æ±‚æ˜ç¡®çš„å¤§å‹é¡¹ç›®

version: 1.0.0

philosophy: "ç¨³æ‰ç¨³æ‰“ï¼Œæ­¥æ­¥ä¸ºè¥ï¼Œè¿½æ±‚æè‡´"

---
ğŸŒŠ æ¶æ„å›¾
å¤åˆ¶ä»£ç 
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                                      â•‘
â•‘                        ğŸŒŠ ç€‘å¸ƒå¼å®Œç¾å·¥ä½œæµæ¶æ„                                        â•‘
â•‘                                                                                      â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
â•‘   â”‚                                                                             â”‚   â•‘
â•‘   â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                                                         â”‚   â•‘
â•‘   â”‚   â•‘  ğŸ“‹ éœ€æ±‚é˜¶æ®µ   â•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â•‘
â•‘   â”‚   â•‘               â•‘                                        â”‚                â”‚   â•‘
â•‘   â”‚   â•‘ spec-fenxi                                      â”‚                â”‚   â•‘
â•‘   â”‚   â•‘ + spec-pinggu  â•‘                                        â”‚                â”‚   â•‘
â•‘   â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                        â”‚                â”‚   â•‘
â•‘   â”‚          â”‚                                                 â”‚                â”‚   â•‘
â•‘   â”‚          â”‚ âœ… ç”¨æˆ·æ‰¹å‡†                                      â”‚                â”‚   â•‘
â•‘   â”‚          â–¼                                                 â”‚                â”‚   â•‘
â•‘   â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                                        â”‚                â”‚   â•‘
â•‘   â”‚   â•‘  ğŸ—ï¸ è®¾è®¡é˜¶æ®µ   â•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   è´¨           â”‚   â•‘
â•‘   â”‚   â•‘               â•‘                          â”‚             â”‚   é‡           â”‚   â•‘
â•‘   â”‚   â•‘  spec-jiagou  â•‘                          â”‚             â”‚   è¿½           â”‚   â•‘
â•‘   â”‚   â•‘ + spec-pinggu  â•‘                          â”‚             â”‚   æº¯           â”‚   â•‘
â•‘   â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚             â”‚                â”‚   â•‘
â•‘   â”‚          â”‚                                   â”‚             â”‚                â”‚   â•‘
â•‘   â”‚          â”‚ âœ… ç”¨æˆ·æ‰¹å‡†                        â”‚             â”‚                â”‚   â•‘
â•‘   â”‚          â–¼                                   â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                          â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•‘  ğŸ“ ä»»åŠ¡é˜¶æ®µ   â•‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•‘               â•‘             â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•‘  spec-ceshi   â•‘             â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•‘ + spec-pinggu  â•‘             â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•             â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚          â”‚                      â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚          â”‚ âœ… ç”¨æˆ·æ‰¹å‡†           â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚          â–¼                      â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—             â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•‘  ğŸ’» å®ç°é˜¶æ®µ   â•‘             â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•‘               â•‘             â”‚            â”‚             â”‚                â”‚   â•‘
â•‘   â”‚   â•‘  spec-daima   â•‘ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â•‘
â•‘   â”‚   â•‘ + spec-pinggu  â•‘                                                         â”‚   â•‘
â•‘   â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                         â”‚   â•‘
â•‘   â”‚          â”‚                                                                  â”‚   â•‘
â•‘   â”‚          â”‚ âœ… å…¨éƒ¨å®Œæˆ                                                       â”‚   â•‘
â•‘   â”‚          â–¼                                                                  â”‚   â•‘
â•‘   â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                                                         â”‚   â•‘
â•‘   â”‚   â•‘  ğŸ‰ äº¤ä»˜å®Œæˆ   â•‘                                                         â”‚   â•‘
â•‘   â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                         â”‚   â•‘
â•‘   â”‚                                                                             â”‚   â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
â•‘                                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š æµç¨‹å®šä¹‰

flowchart TD
    subgraph "ğŸŒŠ ç€‘å¸ƒå¼å®Œç¾å·¥ä½œæµ"
        START([ğŸš€ å¼€å§‹]) --> P1
        
        subgraph P1["ğŸ“‹ Phase 1: éœ€æ±‚åˆ†æ"]
            REQ1[spec-fenxi<br/>ç”Ÿæˆéœ€æ±‚æ–‡æ¡£] --> REQ2[spec-pinggu<br/>è¯„ä¼°éœ€æ±‚è´¨é‡]
            REQ2 --> REQ3{å¾—åˆ†â‰¥85?}
            REQ3 -->|å¦| REQ1
            REQ3 -->|æ˜¯| REQ4{ç”¨æˆ·æ‰¹å‡†?}
            REQ4 -->|ä¿®æ”¹| REQ1
            REQ4 -->|é€šè¿‡| REQ5[âœ… éœ€æ±‚é”å®š]
        end
        
        REQ5 --> P2
        
        subgraph P2["ğŸ—ï¸ Phase 2: æ¶æ„è®¾è®¡"]
            DES1[spec-jiagou<br/>ç”Ÿæˆè®¾è®¡æ–‡æ¡£] --> DES2[spec-pinggu<br/>è¯„ä¼°è®¾è®¡è´¨é‡]
            DES2 --> DES3{å¾—åˆ†â‰¥90?}
            DES3 -->|å¦| DES1
            DES3 -->|æ˜¯| DES4{ç”¨æˆ·æ‰¹å‡†?}
            DES4 -->|ä¿®æ”¹| DES1
            DES4 -->|è¿”å›éœ€æ±‚| P1
            DES4 -->|é€šè¿‡| DES5[âœ… è®¾è®¡é”å®š]
        end
        
        DES5 --> P3
        
        subgraph P3["ğŸ“ Phase 3: ä»»åŠ¡è§„åˆ’"]
            TASK1[spec-ceshi<br/>ç”Ÿæˆä»»åŠ¡æ¸…å•] --> TASK2[spec-pinggu<br/>è¯„ä¼°ä»»åŠ¡è´¨é‡]
            TASK2 --> TASK3{å¾—åˆ†â‰¥90?}
            TASK3 -->|å¦| TASK1
            TASK3 -->|æ˜¯| TASK4{ç”¨æˆ·æ‰¹å‡†?}
            TASK4 -->|ä¿®æ”¹| TASK1
            TASK4 -->|è¿”å›è®¾è®¡| P2
            TASK4 -->|é€šè¿‡| TASK5[âœ… ä»»åŠ¡é”å®š]
        end
        
        TASK5 --> P4
        
        subgraph P4["ğŸ’» Phase 4: ä»£ç å®ç°"]
            IMPL1[é€‰æ‹©ä¸‹ä¸€ä»»åŠ¡] --> IMPL2{æœ‰æœªå®Œæˆ?}
            IMPL2 -->|æ˜¯| IMPL3[spec-daima<br/>å®ç°ä»£ç ]
            IMPL3 --> IMPL4[spec-pinggu<br/>ä»£ç è¯„å®¡]
            IMPL4 --> IMPL5{è¯„å®¡é€šè¿‡?}
            IMPL5 -->|å¦| IMPL3
            IMPL5 -->|æ˜¯| IMPL6[æ›´æ–°ä»»åŠ¡çŠ¶æ€]
            IMPL6 --> IMPL1
            IMPL2 -->|å¦| IMPL7[âœ… å®ç°å®Œæˆ]
        end
        
        IMPL7 --> FINISH([ğŸ† å®Œç¾äº¤ä»˜])
    end
    
    style START fill:#4CAF50,color:#fff
    style FINISH fill:#FFD700,color:#000
    style REQ5 fill:#2196F3,color:#fff
    style DES5 fill:#FF9800,color:#fff
    style TASK5 fill:#9C27B0,color:#fff
    style IMPL7 fill:#E91E63,color:#fff
âš™ï¸ å®Œæ•´é…ç½®

waterfall_workflow:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # å…¨å±€é…ç½®
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  global:
    name: "ç€‘å¸ƒå¼å®Œç¾å·¥ä½œæµ"
    mode: "sequential"  # ä¸¥æ ¼é¡ºåºæ‰§è¡Œ
    allow_phase_skip: false  # ä¸å…è®¸è·³è¿‡é˜¶æ®µ
    allow_parallel: false  # ä¸å…è®¸å¹¶è¡Œ
    Core Analysis Flags: ultra_detailed  # è¶…è¯¦ç»†åˆ†ææ¨¡å¼
    Core Analysis Flags: strict_quality_control  # ä¸¥æ ¼è´¨é‡æ§åˆ¶æ¨¡å¼
    Core Analysis Flags: ulthrathink  # è¶…çº§æ€è€ƒæ¨¡å¼
    Core Analysis Flags: deep_analysis  # æ·±å…¥åˆ†ææ¨¡å¼
    Core Analysis Flags: detailed_feedback  # ç»†èŠ‚åé¦ˆæ¨¡å¼
    Core Analysis Flags: iterative_improvement  # è¿­ä»£æ”¹è¿›æ¨¡å¼
    Core Analysis Flags: iterative_refinement  # è¿­ä»£ç»†åŒ–æ¨¡å¼
    Core Analysis Flags: continuous_integration  # æŒç»­é›†æˆæ¨¡å¼
    Core Analysis Flags: automated_testing  # è‡ªåŠ¨åŒ–æµ‹è¯•æ¨¡å¼
    Core Analysis Flags: security_audit  # å®‰å…¨å®¡è®¡æ¨¡å¼
    Core Analysis Flags: performance_tuning  # æ€§èƒ½è°ƒä¼˜æ¨¡å¼
    Core Analysis Flags: observability_enhancement  # å¯è§‚æµ‹æ€§å¢å¼ºæ¨¡å¼
    Core Analysis Flags: error_handling_optimization  # é”™è¯¯å¤„ç†ä¼˜åŒ–æ¨¡å¼
    
    quality_thresholds:
      requirements: 85
      design: 90
      tasks: 90
      implementation: 85
      code: 85
      code_review: true
      auto_validate_impl: true
    
    approval_required:
      requirements: true
      design: true
      tasks: true
      implementation: false  # å®ç°é˜¶æ®µè‡ªåŠ¨éªŒè¯
    
    rollback_policy:
      enabled: true
      max_rollback_phases: 2  # æœ€å¤šå›é€€2ä¸ªé˜¶æ®µ
  
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # é˜¶æ®µå®šä¹‰
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  phases:
    # Phase 1: éœ€æ±‚
    requirements:
      order: 1
      agent: spec-fenxi
      evaluator: spec-pinggu
      
      entry_criteria:
        - "åŠŸèƒ½æè¿°å·²æä¾›"
        
      activities:
        - name: "éœ€æ±‚åˆ†æ"
          steps:
            - "ç†è§£ä¸šåŠ¡èƒŒæ™¯"
            - "è¯†åˆ«ç”¨æˆ·è§’è‰²"
            - "åˆ†æä½¿ç”¨åœºæ™¯"
            - "è¯†åˆ«éåŠŸèƒ½éœ€æ±‚"
            - "ç¡®å®šä¼˜å…ˆçº§"
            - "è¯†åˆ«ä¾èµ–"
            - "åˆ†æé¡¶çº§åŠŸèƒ½"
            - "åˆ†æå­åŠŸèƒ½"
            - "åˆ†æå®ç°æ–¹å¼"
            - "è¯†åˆ«æ›¿ä»£æ–¹æ¡ˆ"
            - "è¯†åˆ«æ½œåœ¨é—®é¢˜"
            - "è¯†åˆ«æ½œåœ¨è§£å†³æ–¹æ¡ˆ"
            - "åˆ†ææ”¶ç›Šæœ€å¤§åŒ–"
            - "è¯†åˆ«æ½œåœ¨æ”¶ç›Š"
            - â€åˆ†æå¦‚ä½•å¸®ç”¨æˆ·å®ç°æœ€å¼ºç›®æ ‡â€œ
            - â€åˆ†æå¦‚ä½•å¸®ç”¨æˆ·çš„ç³»ç»Ÿå®ç°æœ€å¼ºï¼Œæœ€ç¨³ï¼Œæœ€å®‰å…¨ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«ç›®æ ‡â€œ
            -  å¯ä»¥è‡ªè¡Œè¡¥å……æ›´å¤šåˆ†ææ­¥éª¤
            - "æ•´ç†åˆ†æç»“æœ"
            
        - name: "éœ€æ±‚ç¼–å†™"
          steps:
            - "ç¼–å†™ç”¨æˆ·æ•…äº‹"
            - "å®šä¹‰EARSæ ¼å¼éªŒæ”¶æ ‡å‡†"
            - "è€ƒè™‘è¾¹ç•Œæ¡ä»¶"
            - "å»ºç«‹æœ¯è¯­è¡¨"
            - "ç¼–å†™éœ€æ±‚æ–‡æ¡£"
            - "ç¼–å†™æœ€å¼ºéªŒæ”¶æ ‡å‡†"
            - "ç¼–å†™é£é™©åˆ—è¡¨"
            - "ç¼–å†™å˜æ›´ç®¡ç†è®¡åˆ’"
            - "ç¼–å†™æœ€ä¸¥æ ¼ä½†å®ç”¨çš„æµ‹è¯•ç”¨ä¾‹"
            - "ç¼–å†™æœ€å¼ºï¼Œæœ€å®‰å…¨ï¼Œæœ€ç¨³ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«çš„éƒ¨ç½²è®¡åˆ’"
            - "ç¼–å†™ç›‘æ§æŒ‡æ ‡"
            - "ç¼–å†™åº”æ€¥å“åº”è®¡åˆ’"
            - "ç¼–å†™å®Œæ•´æ–‡æ¡£"
            
        - name: "éœ€æ±‚è¯„å®¡"
          evaluator: spec-pinggu
          criteria:
            - "å®Œæ•´æ€§ â‰¥ 85%"
            - "æ¸…æ™°æ€§ â‰¥ 85%"
            - "å¯æµ‹è¯•æ€§ â‰¥ 80%"
            - "å¯è¡Œæ€§ â‰¥ 75%"
            - "ä¸€è‡´æ€§ â‰¥ 85%"
            - "æ— æ­§ä¹‰æ€§ â‰¥ 90%"
            - "æ— å†²çªæ€§ â‰¥ 90%"
            - "æ— é—æ¼é¡¹ â‰¥ 90%"
            - "æ— å†—ä½™é¡¹ â‰¥ 90%"
            - "æ— é‡å¤é¡¹ â‰¥ 90%"
            - "æ— çŸ›ç›¾é¡¹ â‰¥ 90%"
      
      exit_criteria:
        - "è´¨é‡å¾—åˆ† â‰¥ 85"
        - "ç”¨æˆ·æ˜ç¡®æ‰¹å‡†"
        - "requirements.md å·²åˆ›å»º"
      
      deliverables:
        - requirements.md
        - requirements_evaluation.md
    
    # Phase 2: è®¾è®¡
    design:
      order: 2
      agent: spec-jiagou
      evaluator: spec-pinggu
      depends_on: [requirements]
      
      entry_criteria:
        - "éœ€æ±‚æ–‡æ¡£å·²æ‰¹å‡†"
        - "éœ€æ±‚æ–‡æ¡£å·²é”å®š"
        
      activities:
        - name: "æ¶æ„è®¾è®¡"
          steps:
            - "ç»˜åˆ¶ç³»ç»Ÿä¸Šä¸‹æ–‡å›¾ (C4 L1)"
            - "ç»˜åˆ¶å®¹å™¨å›¾ (C4 L2)"
            - "ç»˜åˆ¶ç»„ä»¶å›¾ (C4 L3)"
            - "è®¾è®¡æœ€å¼ºï¼Œæœ€å®‰å…¨ï¼Œæœ€ç¨³ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«çš„æ•°æ®æµ"
            - "è®¾è®¡æœ€å¼ºï¼Œæœ€å®‰å…¨ï¼Œæœ€ç¨³ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«çš„æ§åˆ¶æµ"
            - "è®¾è®¡æœ€å¼ºï¼Œæœ€å®‰å…¨ï¼Œæœ€ç¨³ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«çš„æ¨¡å—åˆ’åˆ†"
            - "è®¾è®¡æœ€å¼ºï¼Œæœ€å®‰å…¨ï¼Œæœ€ç¨³ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«çš„æŠ€æœ¯é€‰å‹"
            - "è®¾è®¡æœ€å¼ºï¼Œæœ€å®‰å…¨ï¼Œæœ€ç¨³ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«çš„éƒ¨ç½²æ¶æ„"
            - "è®¾è®¡æœ€å¼ºï¼Œæœ€å®‰å…¨ï¼Œæœ€ç¨³ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«çš„æ‰©å±•æ–¹æ¡ˆ"
            -  å¯ä»¥è‡ªå·±è®¾è®¡æƒ³æœ€å¼ºï¼Œæœ€å®‰å…¨ï¼Œæœ€ç¨³ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«çš„å…¶ä»–æ¶æ„å†…å®¹
            - "æ•´ç†è®¾è®¡ç»“æœ"
            
        - name: "è¯¦ç»†è®¾è®¡"
          steps:
          mode:æœ€å¼ºï¼Œæœ€å®‰å…¨ï¼Œæœ€ç¨³ï¼Œæœ€é«˜æ•ˆï¼Œä¸–ç•Œçº§åˆ«çš„è¯¦ç»†è®¾è®¡
            - "ç»„ä»¶èŒè´£å®šä¹‰"
            - "æ¥å£å¥‘çº¦è®¾è®¡"
            - "æ•°æ®æ¨¡å‹è®¾è®¡"
            - "APIè§„èŒƒè®¾è®¡"
            - "æ•°æ®åº“è®¾è®¡"
            - "æ¶ˆæ¯é˜Ÿåˆ—è®¾è®¡"
            - "ç¼“å­˜è®¾è®¡"
            - "å¼‚æ­¥ä»»åŠ¡è®¾è®¡"
            - "å®šæ—¶ä»»åŠ¡è®¾è®¡"
            - "æƒé™æ§åˆ¶è®¾è®¡"
            - "æ—¥å¿—è®°å½•è®¾è®¡"
            - "ç›‘æ§æŒ‡æ ‡è®¾è®¡"
            - "åº”æ€¥å“åº”è®¡åˆ’è®¾è®¡"
            - å¯ä»¥è‡ªè¡Œè¡¥å……æ›´å¤šè¯¦ç»†è®¾è®¡å†…å®¹
            
        - name: "éåŠŸèƒ½è®¾è®¡"
          steps:
            - "å®‰å…¨è®¾è®¡ (STRIDE)"
            - "æ€§èƒ½è®¾è®¡"
            - "å¯è§‚æµ‹æ€§è®¾è®¡"
            - "é”™è¯¯å¤„ç†è®¾è®¡"
            - å¯ä»¥è‡ªè¡Œè¡¥å……æ›´å¤šéåŠŸèƒ½è®¾è®¡å†…å®¹
            
        - name: "è®¾è®¡è¯„å®¡"
          evaluator: spec-pinggu
          criteria:
            - "æ¶æ„å®Œæ•´æ€§ â‰¥ 90%"
            - "éœ€æ±‚è¦†ç›–ç‡ = 100%"
            - "è®¾è®¡è´¨é‡ â‰¥ 85%"
            - "ä¸€è‡´æ€§ â‰¥ 90%"
            - "å¯è¡Œæ€§ â‰¥ 80%"
            - "æ¸…æ™°æ€§ â‰¥ 85%"
            - "æ— æ­§ä¹‰æ€§ â‰¥ 90%"
            - "æ— å†²çªæ€§ â‰¥ 90%"
            - "æ— é—æ¼é¡¹ â‰¥ 90%"
            - "æ— å†—ä½™é¡¹ â‰¥ 90%"
            - "æ— é‡å¤é¡¹ â‰¥ 90%"
            - "æ— çŸ›ç›¾é¡¹ â‰¥ 90%"
      
      exit_criteria:
        - "è´¨é‡å¾—åˆ† â‰¥ 90"
        - "ç”¨æˆ·æ˜ç¡®æ‰¹å‡†"
        - "design.md å·²åˆ›å»º"
      
      deliverables:
        - design.md
        - design_evaluation.md
    
    # Phase 3: ä»»åŠ¡
    tasks:
      order: 3
      agent: spec-ceshi
      evaluator: spec-pinggu
      depends_on: [requirements, design]
      
      entry_criteria:
        - "è®¾è®¡æ–‡æ¡£å·²æ‰¹å‡†"
        - "è®¾è®¡æ–‡æ¡£å·²é”å®š"
        
      activities:
        - name: "ä»»åŠ¡åˆ†è§£"
          steps:
            - "è¯†åˆ«æ‰€æœ‰å®ç°å•å…ƒ"
            - "åˆ†è§£ä¸º2-4å°æ—¶ä»»åŠ¡"
            - "åªåŒ…å«ç¼–ç ä»»åŠ¡"
            - "éµå¾ªTDDåŸåˆ™"
            - "ç¡®ä¿ä»»åŠ¡ç‹¬ç«‹å¯æ‰§è¡Œ"
            - "ç¼–å†™ä»»åŠ¡æè¿°"
            - "ç¼–å†™ä»»åŠ¡éªŒæ”¶æ ‡å‡†"
            - "ä¼°ç®—ä»»åŠ¡å·¥æ—¶"
            - "è¯†åˆ«ä»»åŠ¡é—´ä¾èµ–"
            - "è¯†åˆ«å¯å¹¶è¡Œä»»åŠ¡"
            - "è¯†åˆ«é«˜é£é™©ä»»åŠ¡"
            - "è¯†åˆ«ç´§æ€¥ä»»åŠ¡"
            - "è¯†åˆ«é‡è¦ä»»åŠ¡"
            - "è¯†åˆ«ä½ä¼˜å…ˆçº§ä»»åŠ¡"
            - "è¯†åˆ«é‡å¤ä»»åŠ¡"
            - "è¯†åˆ«é‡å¤å·¥ä½œ"
            - å¯ä»¥è‡ªè¡Œè¡¥å……æ›´å¤šä»»åŠ¡åˆ†è§£å†…å®¹
            
        - name: "ä¾èµ–åˆ†æ"
          steps:
            - "è¯†åˆ«ä»»åŠ¡ä¾èµ–"
            - "ç”Ÿæˆä¾èµ–å›¾"
            - "ç¡®å®šå…³é”®è·¯å¾„"
            - "è¯†åˆ«å¯å¹¶è¡Œä»»åŠ¡"
            - "è¯†åˆ«ç“¶é¢ˆä»»åŠ¡"
            - "è¯†åˆ«å¯ä¸²è¡Œä»»åŠ¡"
            - "è¯†åˆ«å¯å¹¶è¡Œä»»åŠ¡"
            - "è¯†åˆ«å¯ä¼˜åŒ–ä»»åŠ¡"
            - "è¯†åˆ«å¯é‡æ„ä»»åŠ¡"
            - "è¯†åˆ«å¯å¤ç”¨ä»»åŠ¡"
            - "è¯†åˆ«å¯é‡ç”¨ä»»åŠ¡"
            - "è¯†åˆ«å¯æ›¿æ¢ä»»åŠ¡"
            - "è¯†åˆ«å¯åˆ é™¤ä»»åŠ¡"
            - å¯ä»¥è‡ªè¡Œè¡¥å……æ›´å¤šä¾èµ–åˆ†æå†…å®¹
            
        - name: "è¿½æº¯å»ºç«‹"
          steps:
            - "å»ºç«‹éœ€æ±‚è¿½æº¯çŸ©é˜µ"
            - "éªŒè¯100%éœ€æ±‚è¦†ç›–"
            - "éªŒè¯ä»»åŠ¡å¯æ‰§è¡Œæ€§"
            - "éªŒè¯ä¾èµ–å…³ç³»æ¸…æ™°åº¦"
            - "éªŒè¯ä»»åŠ¡ä¼˜å…ˆçº§åˆç†æ€§"
            - "éªŒè¯ä»»åŠ¡å·¥æ—¶ä¼°ç®—å‡†ç¡®æ€§"
            
        - name: "ä»»åŠ¡è¯„å®¡"
          evaluator: spec-pinggu
          criteria:
            - "éœ€æ±‚è¦†ç›–ç‡ = 100%"
            - "ä»»åŠ¡å¯æ‰§è¡Œæ€§ â‰¥ 90%"
            - "ä¾èµ–å…³ç³»æ¸…æ™°åº¦ â‰¥ 90%"
            - "ä»»åŠ¡ä¼˜å…ˆçº§åˆç†æ€§ â‰¥ 85%"
            - "ä»»åŠ¡å·¥æ—¶ä¼°ç®—å‡†ç¡®æ€§ â‰¥ 85%"
            - "ä»»åŠ¡é—´ä¾èµ–å…³ç³»æ¸…æ™°åº¦ â‰¥ 90%"
      
      exit_criteria:
        - "è´¨é‡å¾—åˆ† â‰¥ 90"
        - "ç”¨æˆ·æ˜ç¡®æ‰¹å‡†"
        - "tasks.md å·²åˆ›å»º"
      
      deliverables:
        - tasks.md
        - dependency_graph.md
        - traceability_matrix.md
    
    # Phase 4: å®ç°
    implementation:
      order: 4
      agent: spec-daima
      evaluator: spec-pinggu
      depends_on: [requirements, design, tasks]
      mode: "iterative"  # è¿­ä»£æ‰§è¡Œæ¯ä¸ªä»»åŠ¡
      mode: "auto_validate_impl"  # è‡ªåŠ¨éªŒè¯å®ç°è´¨é‡
      mode: "ultra_detailed"  # è¶…è¯¦ç»†è¿­ä»£æ¨¡å¼
      mode: "deep_analysis"  # æ·±å…¥åˆ†ææ¨¡å¼
      mode: "detailed_feedback"  # ç»†èŠ‚åé¦ˆæ¨¡å¼
      mode: "strict_quality_control"  # ä¸¥æ ¼è´¨é‡æ§åˆ¶æ¨¡å¼
      mode: "ulthrathink"  # è¶…çº§æ€è€ƒæ¨¡å¼

      entry_criteria:
        - "ä»»åŠ¡æ¸…å•å·²æ‰¹å‡†"
        - "ä»»åŠ¡æ¸…å•å·²é”å®š"
        
      per_task_activities:
        - name: "ä»£ç å®ç°"
          steps:
            - "ç†è§£ä»»åŠ¡ä¸Šä¸‹æ–‡"
            - "å®ç°æ ¸å¿ƒé€»è¾‘"
            - "å®ç°é”™è¯¯å¤„ç†"
            - "æ·»åŠ æ—¥å¿—å’Œæ³¨é‡Š"
            - "éµå¾ªç¼–ç è§„èŒƒ"
            - "ä¼˜åŒ–æ€§èƒ½"
            - æŒ‰ç…§è‡ªå·±è§’è‰²çš„æœ€å¼ºèƒ½åŠ›è¡¥å……æ›´å¤šå®ç°æ­¥éª¤
            
        - name: "æµ‹è¯•ç¼–å†™"
          steps:
            - "ç¼–å†™å•å…ƒæµ‹è¯•"
            - "è¦†ç›–æ­£å¸¸è·¯å¾„"
            - "è¦†ç›–è¾¹ç•Œæ¡ä»¶"
            - "è¦†ç›–å¼‚å¸¸è·¯å¾„"
            - "ç¡®ä¿æµ‹è¯•ç‹¬ç«‹"
            - "ç¡®ä¿æµ‹è¯•å¯é‡å¤"
            - æŒ‰ç…§è‡ªå·±è§’è‰²çš„æœ€å¼ºèƒ½åŠ›è¡¥å……æ›´å¤šæµ‹è¯•æ­¥éª¤
            
        - name: "ä»£ç è¯„å®¡"
          evaluator: spec-judge
          criteria:
            - "ä¸è®¾è®¡ä¸€è‡´æ€§ = 100%"
            - "æµ‹è¯•é€šè¿‡ç‡ = 100%"
            - "ä»£ç è´¨é‡ â‰¥ 85%"
            - "ä»£ç è¦†ç›–ç‡ â‰¥ 85%"
            - "æ— ä¸¥é‡ä»£ç å¼‚å‘³"
            - "æ— ä¸¥é‡ä»£ç æ¼æ´"
            - "æ— ä¸¥é‡ä»£ç ç¼ºé™·"
            - "æ— ä¸¥é‡ä»£ç é£æ ¼é—®é¢˜"
            - "æ— ä¸¥é‡ä»£ç å¤æ‚åº¦é—®é¢˜"
            - "æ— ä¸¥é‡ä»£ç é‡å¤é—®é¢˜"
            - "æ— ä¸¥é‡ä»£ç è€¦åˆé—®é¢˜"
            - "æ— ä¸¥é‡ä»£ç æ€§èƒ½é—®é¢˜"
            - "æ— ä¸¥é‡ä»£ç å®‰å…¨æ€§é—®é¢˜"
      
      exit_criteria:
        - "æ‰€æœ‰ä»»åŠ¡å®Œæˆ"
        - "æ‰€æœ‰æµ‹è¯•é€šè¿‡"
        - "ä»£ç è¦†ç›–ç‡ â‰¥ 85%"
        - "ä»£ç è´¨é‡ â‰¥ 85%"
        - "ç”¨æˆ·æ˜ç¡®æ‰¹å‡†"
      
      deliverables:
        - source_code/
        - tests/
        - implementation_report.md

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # è´¨é‡ä¿éšœ
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  quality_assurance:
    evaluation_agent: spec-pinggu
    
    evaluation_points:
      - after_requirements_draft
      - after_design_draft
      - after_tasks_draft
      - after_each_task_implementation
      - before_final_delivery
      - after_final_delivery_review
      - periodic_quality_audits
    
    quality_gates:
      requirements:
        dimensions:
          completeness: { weight: 25, min: 80 }
          clarity: { weight: 25, min: 80 }
          feasibility: { weight: 25, min: 75 }
          testability: { weight: 25, min: 80 }
          consistency: { weight: 25, min: 90 }
        overall_min: 85
        
      design:
        dimensions:
          completeness: { weight: 25, min: 85 }
          clarity: { weight: 25, min: 85 }
          feasibility: { weight: 25, min: 80 }
          consistency: { weight: 25, min: 90 }
        overall_min: 90
        
      tasks:
        dimensions:
          completeness: { weight: 30, min: 95 }
          executability: { weight: 30, min: 90 }
          dependencies: { weight: 20, min: 85 }
          traceability: { weight: 20, min: 100 }
        overall_min: 90
        
      code:
        dimensions:
          correctness: { weight: 30, min: 100 }
          quality: { weight: 25, min: 80 }
          test_coverage: { weight: 25, min: 85 }
          maintainability: { weight: 20, min: 80 }
        overall_min: 85
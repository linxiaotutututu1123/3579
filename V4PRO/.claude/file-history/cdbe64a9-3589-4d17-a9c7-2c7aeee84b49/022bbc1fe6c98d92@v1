// Claude实时提示系统
// 在浏览器控制台或Node.js中运行

const prompts = {
    "精度分析": {
        "code": "getcontext().prec = 200",
        "question": "200位精度对钻石评估来说是否过度？对性能有什么影响？",
        "line": 27
    },
    "异常处理": {
        "code": "except:",
        "question": "这里的异常处理太宽泛，应该具体处理哪些异常？",
        "line": 389
    },
    "性能优化": {
        "code": "def calculate_optical_performance",
        "question": "这个函数如何优化以提高计算速度？",
        "line": 59
    },
    "线程管理": {
        "code": "threading.Thread",
        "question": "每次计算都创建新线程，是否应该使用线程池？",
        "line": 372
    }
};

function generatePrompt(filename, lineNumber) {
    console.log(`\n=== Claude提示 ===`);
    console.log(`文件: ${filename}`);
    console.log(`行号: ${lineNumber}`);

    // 根据行号提供相应的提示
    if (lineNumber >= 25 && lineNumber <= 30) {
        return prompts.精度分析.question;
    } else if (lineNumber >= 380 && lineNumber <= 395) {
        return prompts.异常处理.question;
    } else if (lineNumber >= 55 && lineNumber <= 65) {
        return prompts.性能优化.question;
    } else if (lineNumber >= 370 && lineNumber <= 375) {
        return prompts.线程管理.question;
    }

    return "请分析这段代码的质量和可能的改进点。";
}

// 使用示例
console.log("Claude实时提示系统已加载");
console.log("\n使用方法：");
console.log("1. 在TREA中选中代码");
console.log("2. 查看行号");
console.log("3. 在这里输入：generatePrompt('filename.py', 行号)");
console.log("\n预定义提示：");
Object.keys(prompts).forEach(key => {
    console.log(`- ${key}: 第${prompts[key].line}行 - ${prompts[key].question}`);
});
@echo off
echo 正在启动自动分析...
echo.

:: 打开TREA和文件
start code "C:\Users\1\Desktop\火山方舟大模型体验中心-火山引擎_files\QL钻石光学能量化系统_终极修复版-完美运行版.py"

:: 等待加载
timeout /t 3

:: 使用Claude进行一系列分析
echo.
echo [分析1] 精度设置问题...
.trae-cn/extensions/anthropic.claude-code-2.0.61-win32-x64/resources/native-binary/claude.exe -p "分析钻石评估系统第27行：getcontext().prec = 200。对于钻石评估，200位精度是否过度？对性能有什么影响？建议设置多少位合适？"

echo.
echo ===========================================
echo.

echo [分析2] 异常处理问题...
.trae-cn/extensions/anthropic.claude-code-2.0.61-win32-x64/resources/native-binary/claude.exe -p "分析钻石评估系统第389行的异常处理：except: params[key] = BASELINE_PARAMS[key]。这种裸露的except有什么问题？应该如何改进？"

echo.
echo ===========================================
echo.

echo [分析3] 性能优化建议...
.trae-cn/extensions/anthropic.claude-code-2.0.61-win32-x64/resources/native-binary/claude.exe -p "分析钻石评估系统的性能瓶颈：1) 使用Decimal进行所有计算 2) 每次创建新线程 3) 200位精度。请提供具体的优化建议。"

echo.
echo ===========================================
echo.

echo [分析4] 代码质量改进...
.trae-cn/extensions/anthropic.claude-code-2.0.61-win32-x64/resources/native-binary/claude.exe -p "评估钻石评估系统的整体代码质量，包括：1) 架构设计 2) 错误处理 3) 代码组织 4) 可维护性。给出1-10分的评分和改进建议。"

echo.
echo 分析完成！查看以上结果。
pause